set testdir [file dirname $argv0]
source $testdir/tester.tcl
set testprefix test

proc test_func {} {
  global test_args
  set idx 0
  foreach {arg} $test_args {
    incr idx
    if {$idx eq 3} {
      return 1
    } elseif {$idx eq 5} {
      return 0
    } else {
      lappend test_idx_list $idx
    }
  }
  return 1
}

do_test test-1.1 {
  execsql {
    CREATE TABLE t3(a, b);
    INSERT INTO t3 VALUES(1, 1);
  }
  execsql {INSERT INTO t3 VALUES(2, 2)}
  execsql {INSERT INTO t3 VALUES(3, 3)}
} {1 1}

do_execsql_test test-1.2 {
  SELECT b FROM t3 WHERE a = 5
} {0}

ifcapable auth {
  sqlite3_log 0 "Test log message 1"
  sqlite3_log 0 "Test log message 2"
  do_faultsim_getdb
  do_execsql_test test-1.3 {
    PRAGMA database_list
  } {0 main 1 temp 2 attached}
}

set test_args {2 foo 3 {a b c} 4 5 6}
proc test_func_w_arg {} {
  test_func
}
do_test test-1.4 {
  test_func_w_arg
} {1}

do_execsql_test test-4.1 {
  CREATE TABLE t2(n);
  INSERT INTO t2 VALUES(5);
}
  {1 5}

do_test test-4.2 {execsql {SELECT * FROM t2}} {5}
do_execsql_test test-5.1 {
  CREATE TABLE t3(
    c1,
    c2,
    c3,
    c4,
    c5,
    c6
  );
  CREATE TABLE t4(
    a1,
    a2,
    b1,
    b2,
    b3,
    b4
  );
  INSERT INTO t3 VALUES(1, 2, 3, 4, 5, 6);
  INSERT INTO t4 VALUES(7, 8, 9, 10, 11, 12);
  SELECT * FROM t4 WHERE a2 = 3;
}
{7 8 9 10 11 12}

finish_test