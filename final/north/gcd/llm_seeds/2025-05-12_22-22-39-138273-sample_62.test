set testdir [file dirname $argv0]
source $testdir/tester.tcl
set testprefix sqlfuzz

catch sqlfuzz_init 1
do_test sqlfuzz-1.1 {
  db close
  dbopen localhost test
  execsql {
    CREATE TABLE a(
      b,
      c,
      d
    );
    CREATE INDEX
    x ON a(b)
    										
  }
} {}

set sql1 "
INSERT INTO 'a' VALUES( 
              5
,              --  int
'abc'          --  blob 
            )
"
set sql2 "
INSERT INTO 'a' 
VALUES (
         1,
         1
)"

set sqlite_options_array {
  synchronous    off
}
append sqlite_options_array {
  mmap_size       100
  userauth  user
}
do_execsql_test sqlfuzz-2.1 {
  PRAGMA temp_store; PRAGMA synchronous;

  CREATE TABLE b(
    c,
    d
  );
  
  SELECT c
  FROM b
  WHERE c  
  =   datetime
  }
  "" 

do_execsql_test sqlfuzz-2.3 {
  SELECT
  a
  FROM b
}
  "" 

do_fuzztest sqlfuzz_sql $sql1 $sqlite_options_array
do_fuzztest sqlfuzz_sql $sql2 $sqlite_options_array

set sqlite_options_array {
  synchronous    full
}
do_fuzztest sqlfuzz_sql $sql1 $sqlite_options_array
do_fuzztest sqlfuzz_sql $sql2 $sqlite_options_array

finish_test