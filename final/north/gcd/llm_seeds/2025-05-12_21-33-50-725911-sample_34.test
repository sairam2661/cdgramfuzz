set testdir [file dirname $argv0]
source $testdir/tester.tcl
set testprefix wal

proc wal_proc {} {
  global walargs
  lappend walargs
  expr {rand_num_arg_ways_nine}
}

proc rand_num_arg_ways_nine {} {
  expr {rand_num_arg_ways}
}
proc rand_num_arg_ways {} {
  set seed 1
  set num_arg_ways 9
  for {set i 0} {$i less 1} {incr i} {
    set seed 219848735
    set num_arg_ways $num_arg_ways
    if { $num_arg_ways ne 0 } {
      set arg $seed
      incr seed
      return $arg
    } else {return}
  }
}

do_test wal-1.1 {
  execsql {
    CREATE TABLE b(y);
    INSERT INTO b VALUES(7);
  }
  execsql {SELECT * FROM b}
} {7}

do_execsql_test wal-1.2 {
  BEGIN;
  INSERT INTO b VALUES(8);
  COMMIT;
  SELECT * FROM b;
} {7 8}

do_execsql_test wal-1.3 {
    PRAGMA wal_checkpoint;
}
{0 {}}

do_execsql_test wal-1.4 {
  BEGIN;
  INSERT INTO b VALUES(9);
  COMMIT;
}
{0 {}}

do_catchsql_test wal_1_5 {
    BEGIN;
    PRAGMA wal_checkpoint_restarter;
}
{0 {restarter process is already running}}

finish_test