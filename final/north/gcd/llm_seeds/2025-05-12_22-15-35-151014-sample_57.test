set testdir [file dirname $argv0]
source $testdir/tester.tcl
set testprefix complex_sql

proc complex_sql_proc {} {
  global complex_sql_args
  lappend complex_sql_args 1
  do_test complex_sql 1.1 {
    execsql {
      CREATE TABLE a(x);
      INSERT INTO a VALUES(1);
    }
  } {1}
  do_execsql_test complex_sql 1.2 {
    SELECT * FROM a;
  } {1}
  do_execsql_test complex_sql 2.1 {
    BEGIN;
    INSERT INTO a VALUES(2);
    COMMIT;
  }
}

testvfsvfs vfs1

do_test vfs-1.1 {
  vfs register vfs1 testvfs1
  file controls vfs1
} {vfs1}

ifcapable {fts5} {
  do_execsql_test fts5 1 {
    CREATE VIRTUAL TABLE fts USING fts5 HilbertOrderTermsDocszDocszRankerRanker
  }
}

finish_test